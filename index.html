<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Invelar - Intelligent Automation for the Modern Enterprise</title>
    <meta name="description" content="Transform your business with AI-powered automation. Streamline processes, reduce costs, and accelerate growth with Invelar's intelligent automation solutions." />
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
    
    <!-- Voiceflow Chat Widget -->
    <script type="text/javascript">
      // Global state for chat widget
      window.voiceflowChatState = {
        isOpen: false,
        isInitialized: false
      };

      // Load Voiceflow widget
      (function(d, t) {
        var v = d.createElement(t), s = d.getElementsByTagName(t)[0];
        v.onload = function() {
          // Initialize Voiceflow with proper configuration
          window.voiceflow.chat.load({
            verify: { projectID: '6846c5cea6a8e2a7db8c1327' },
            url: 'https://general-runtime.voiceflow.com',
            versionID: 'production'
          });

          // Mark as initialized
          window.voiceflowChatState.isInitialized = true;

          // Hide the default launcher immediately after load
          setTimeout(() => {
            const launchers = document.querySelectorAll([
              '[data-testid="launcher"]',
              '[data-testid="widget-launcher"]',
              '.vf-launcher',
              '.vf-widget-launcher',
              '.vf-test-button',
              'button[aria-label*="test"]',
              'button[aria-label*="Test"]',
              '.widget-launcher',
              '.chat-launcher'
            ].join(','));
            
            launchers.forEach(launcher => {
              launcher.style.display = 'none';
              launcher.style.visibility = 'hidden';
              launcher.style.opacity = '0';
              launcher.style.pointerEvents = 'none';
            });
          }, 100);

          // Override the default open/close methods
          const originalOpen = window.voiceflow.chat.open;
          const originalClose = window.voiceflow.chat.close;

          window.voiceflow.chat.open = function() {
            if (!window.voiceflowChatState.isOpen) {
              window.voiceflowChatState.isOpen = true;
              originalOpen.call(this);
            }
          };

          window.voiceflow.chat.close = function() {
            if (window.voiceflowChatState.isOpen) {
              window.voiceflowChatState.isOpen = false;
              originalClose.call(this);
            }
          };

          window.voiceflow.chat.toggle = function() {
            if (window.voiceflowChatState.isOpen) {
              this.close();
            } else {
              this.open();
            }
          };
        };
        
        v.src = "https://cdn.voiceflow.com/widget/bundle.mjs"; 
        v.type = "text/javascript"; 
        s.parentNode.insertBefore(v, s);
      })(document, 'script');

      // Hide any dynamically created Voiceflow UI elements
      const observer = new MutationObserver(function(mutations) {
        mutations.forEach(function(mutation) {
          mutation.addedNodes.forEach(function(node) {
            if (node.nodeType === 1) { // Element node
              // Hide any Voiceflow launcher elements
              const launchers = node.querySelectorAll && node.querySelectorAll([
                '[data-testid="launcher"]',
                '[data-testid="widget-launcher"]',
                '.vf-launcher',
                '.vf-widget-launcher',
                '.vf-test-button',
                '.widget-launcher',
                '.chat-launcher',
                'button[aria-label*="test"]',
                'button[aria-label*="Test"]'
              ].join(','));
              
              if (launchers) {
                launchers.forEach(launcher => {
                  launcher.style.display = 'none';
                  launcher.style.visibility = 'hidden';
                  launcher.style.opacity = '0';
                  launcher.style.pointerEvents = 'none';
                });
              }

              // Also check if the node itself is a launcher
              if (node.matches && node.matches([
                '[data-testid="launcher"]',
                '[data-testid="widget-launcher"]',
                '.vf-launcher',
                '.vf-widget-launcher',
                '.vf-test-button',
                '.widget-launcher',
                '.chat-launcher',
                'button[aria-label*="test"]',
                'button[aria-label*="Test"]'
              ].join(','))) {
                node.style.display = 'none';
                node.style.visibility = 'hidden';
                node.style.opacity = '0';
                node.style.pointerEvents = 'none';
              }
            }
          });
        });
      });

      // Start observing after DOM is ready
      document.addEventListener('DOMContentLoaded', function() {
        observer.observe(document.body, {
          childList: true,
          subtree: true
        });
      });
    </script>
  </body>
</html>